{"version":3,"file":"unstated-next.umd.js","sources":["../src/unstated-next.tsx"],"sourcesContent":["import React from \"react\"\r\n\r\nexport interface ContainerProviderProps<State = void> {\r\n\tinitialState?: State\r\n\tchildren: React.ReactNode\r\n}\r\n\r\nexport interface Container<Value, State = void> {\r\n\tContext\r\n\tConsumer\r\n\tProvider: React.ComponentType<ContainerProviderProps<State>>\r\n\tuseContainer: () => Value\r\n\tconnect\r\n}\r\n\r\nexport function createContainer<Value, State = void>(\r\n\tuseHook: (initialState?: State) => Value,\r\n): Container<Value, State> {\r\n\tlet Context = React.createContext<Value | null>(null)\r\n\tlet Consumer = Context.Consumer\r\n\r\n\tfunction Provider(props: ContainerProviderProps<State>) {\r\n\t\tlet value = useHook(props.initialState)\r\n\t\treturn <Context.Provider value={value}>{props.children}</Context.Provider>\r\n\t}\r\n\r\n\tfunction useContainer(): Value {\r\n\t\tlet value = React.useContext(Context)\r\n\t\tif (value === null) {\r\n\t\t\tthrow new Error(\"Component must be wrapped with <Container.Provider>\")\r\n\t\t}\r\n\t\treturn value\r\n\t}\r\n\r\n\tlet connect = mapper => SuperComponent => {\r\n\t\treturn props => (\r\n\t\t\t<Consumer>\r\n\t\t\t\t{(context) => (\r\n\t\t\t\t\t<SuperComponent\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t{...mapper(context)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Consumer>\r\n\t\t)\r\n\t}\r\n\r\n\treturn { Context, Consumer, Provider, useContainer, connect }\r\n}\r\n\r\nexport function useContainer<Value, State = void>(\r\n\tcontainer: Container<Value, State>,\r\n): Value {\r\n\treturn container.useContainer()\r\n}\r\n"],"names":["createContainer","useHook","Context","React","createContext","Consumer","Provider","props","value","initialState","children","useContainer","useContext","Error","connect","mapper","SuperComponent","context","container"],"mappings":";;;;;;;UAegBA,gBACfC;OAEIC,OAAO,GAAGC,KAAK,CAACC,aAAN,CAAkC,IAAlC,CAAd;OACIC,QAAQ,GAAGH,OAAO,CAACG,QAAvB;;YAESC,QAAT,CAAkBC,KAAlB;SACKC,KAAK,GAAGP,OAAO,CAACM,KAAK,CAACE,YAAP,CAAnB;YACON,mBAAA,CAACD,OAAO,CAACI,QAAT;OAAkBE,KAAK,EAAEA;MAAzB,EAAiCD,KAAK,CAACG,QAAvC,CAAP;;;YAGQC,YAAT;SACKH,KAAK,GAAGL,KAAK,CAACS,UAAN,CAAiBV,OAAjB,CAAZ;;SACIM,KAAK,KAAK,IAAd,EAAoB;aACb,IAAIK,KAAJ,CAAU,qDAAV,CAAN;;;YAEML,KAAP;;;OAGGM,OAAO,aAAGC,2BAAUC;sBAChBT,gBACNJ,mBAAA,CAACE,QAAD,MAAA,YACGY,kBACDd,mBAAA,CAACa,cAAD,oBACKT,OACAQ,MAAM,CAACE,OAAD,EAFX,IAFF,IADD;OADD;;UAaO;cAAEf,OAAF;eAAWG,QAAX;eAAqBC,QAArB;mBAA+BK,YAA/B;cAA6CG;IAApD;;AAGD,UAAgBH,aACfO;UAEOA,SAAS,CAACP,YAAV,EAAP;;;;;;;;;;"}